
Please add and API called /api/oracle/get-ach-data-for-core-post-sp-approved 

    SELECT
    -- Trace Sequence Number (GN_SECUENCIACONVENIO)
    ed.TRACE_SEQUENCE_NUMBER AS trace_sequence_number,  -- GN_SECUENCIACONVENIO
    
    -- Client ID (GN_CODIGOCLIENTE)
    af.CLIENT_ID AS client_id,  -- GN_CODIGOCLIENTE
    
    -- Origin Agency (GN_AGENCIACTAORIGEN)
    SUBSTR(bh.ORIGINATING_DFI_ID, 1, 3) AS origin_agency,  -- GN_AGENCIACTAORIGEN
    
    -- Origin Sub-account (GN_SUBCTAORIGEN)
    -- May need parsing logic or default to 0
    0 AS origin_sub_account,  -- GN_SUBCTAORIGEN (default, may need parsing)
    -- ACH Class (GV_APLCTAORIGEN)
    bh.STANDARD_ENTRY_CLASS_CODE AS ach_class,  -- GV_APLCTAORIGEN
    
    -- Origin Account (GN_CTAORIGEN)
    ed.DFI_ACCOUNT_NUMBER AS origin_account,  -- GN_CTAORIGEN
    
    -- Company ID (GN_EMPCTAORIGEN)
    bh.COMPANY_IDENTIFICATION AS company_id,  -- GN_EMPCTAORIGEN

    bh.Company_Entry_Description as company-entry-description, 
    
    -- Receiver Routing/ABA (GN_ABABCORECIBIDOR)
    ed.RECEIVING_DFI_ID || ed.CHECK_DIGIT AS receiver_routing_aba,  -- GN_ABABCORECIBIDOR
    
    -- Receiver Account (GV_CTABCORECIBIDOR)
    ed.DFI_ACCOUNT_NUMBER AS receiver_account,  -- GV_CTABCORECIBIDOR
    
    -- Transaction Code (GN_PRODBCORECIBIDOR)
    ed.TRANSACTION_CODE AS transaction_code,  -- GN_PRODBCORECIBIDOR 22-Credit 27-Debit
    
    -- Company Name (GV_CUENTAINSTITUCION)
    bh.COMPANY_NAME AS company_name,  -- GV_CUENTAINSTITUCION
    
    -- Receiver ID (GV_IDRECIBIDOR)
    ed.INDIVIDUAL_ID_NUMBER AS receiver_id,  -- GV_IDRECIBIDOR
    
    -- Receiver Name (GV_NOMBRERECIBIDOR)
    ed.INDIVIDUAL_NAME AS receiver_name,  -- GV_NOMBRERECIBIDOR
    
    -- Reference (GV_REFERENCIA)
    fh.REFERENCE_CODE AS reference_code,  -- GV_REFERENCIA
    
    -- Payment Description (GV_DESCPAGO)
    bh.COMPANY_ENTRY_DESCRIPTION AS payment_description,  -- GV_DESCPAGO
    
    -- Amount (GN_MONTOOPERACION)
    ed.AMOUNT_DECIMAL AS amount,  -- GN_MONTOOPERACION
    
    -- Additional fields for filtering/identification
    ed.ENTRY_DETAIL_ID,
    ed.FILE_ID,
    ed.BATCH_NUMBER,
    af.ORIGINAL_FILENAME

FROM
    ACH_ENTRY_DETAIL ed
    
    -- Join to ACH_FILES for CLIENT_ID
    INNER JOIN ACH_FILES af
        ON ed.FILE_ID = af.FILE_ID
    
    -- Join to ACH_BATCH_HEADER for batch-level data
    INNER JOIN ACH_BATCH_HEADER bh
        ON ed.FILE_ID = bh.FILE_ID
        AND ed.BATCH_NUMBER = bh.BATCH_NUMBER
    
    -- Join to ACH_FILE_HEADER for file-level data
    INNER JOIN ACH_FILE_HEADER fh
        ON ed.FILE_ID = fh.FILE_ID

WHERE
    -- Filter conditions (to be determined based on requirements)
    ed.RECORD_TYPE_CODE = '6'  -- Only Entry Detail records
    AND af.PROCESSING_STATUS = 'APPROVED'

    